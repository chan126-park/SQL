------ Import CSV file into Table 


-- 테이블 만들기 

CREATE TABLE persons (
  id SERIAL,
  first_name VARCHAR(50),
  last_name VARCHAR(50),
  dob DATE,
  email VARCHAR(255),
  PRIMARY KEY (id)
)

-- Import a CSV file into a table using COPY statement
COPY persons(first_name, last_name, dob, email)
-- FROM 파일 경로 
FROM 'C:\sampledb\persons.csv' 
-- 파일 각 row 안에 컬럼들을 분리하는 문자 
DELIMITER ','
-- csv 파일에 헤더가 포함되어 있음을 나타냄 
CSV HEADER; 


------ Export PostgrSQL Table to CSV file (2가지 방법 :  COPY, \copy)
-- 먼저 persons 테이블 데이터 확인 
select * from persons;

-- COPY 문 사용 
-- COPY table name TO 'PATH'....;
COPY persons TO 'C:\tmp\persons_db.csv' DELIMITER ',' CSV HEADER;

-- 특정 컬럼 선택 가능 
COPY persons(first_name,last_name,email) 
TO 'C:\tmp\persons_partial_db.csv' DELIMITER ',' CSV HEADER;
-- 헤더없애기 
COPY persons(email) 
TO 'C:\tmp\persons_email_db.csv' DELIMITER ',' CSV;

-- \copy 문 사용 
\copy (SELECT * FROM persons) to 'C:\tmp\persons_client.csv' with csv
