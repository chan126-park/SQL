--  테이블 생성 
CREATE TABLE accounts (
    id INT GENERATED BY DEFAULT AS IDENTITY,
    name VARCHAR(100) NOT NULL,
    balance DEC(15,2) NOT NULL,
    PRIMARY KEY(id)
);

-- 트랜잭션 시작 명령어 3개 중 하나 사용 
BEGIN TRANSACTION; 
BEGIN WORK;
BEGIN; 
 
---- 테이블 조회하면 value 변화 없음 
BEGIN;

INSERT INTO accounts(name,balance)
VALUES('Alice',10000);

----Commit a transaction 명령어 3개 중 하나 사용 
COMMIT WORK; 
COMMIT TRANSACION;
COMMIT;

-- Commit 예제
-- start a transaction
BEGIN;

-- insert a new row into the accounts table
INSERT INTO accounts(name,balance)
VALUES('Alice',10000);

-- commit the change (or roll it back later)
COMMIT;

-- Rolling back a transaction 명령어 3개 중 하나 사용 
ROLLBACK WORK;
ROLLBACK TRANSACTION;
ROLLBACK;


-- Rollback 예제

-- begin the transaction
BEGIN;

-- deduct the amount from the account 1
UPDATE accounts 
SET balance = balance - 1500
WHERE id = 1;

-- add the amount from the account 3 (instead of 2)
UPDATE accounts
SET balance = balance + 1500
WHERE id = 3; 

-- roll back the transaction
ROLLBACK;
